"use strict";!function(){function t(){angular.element(document).ready(function(){angular.bootstrap(document,["app"])})}var n=angular.module("app",["ui.router","app.home","app.articles","app.partners","app.partner","app.contact","ngSanitize","ngStorage","ngMaterial","ngAnimate","toastr"]);return t(),n}(),function(){angular.module("app").run()}(),function(){angular.module("app").config(["$compileProvider",function(t){t.debugInfoEnabled(!1)}])}();var host_url="http://ec2-52-42-109-64.us-west-2.compute.amazonaws.com:8080/blog-server/";!function(){function t(t,n){function e(){n.go("home")}function r(){n.go("partners")}function o(){n.go("contact")}var a=this;a.goToHome=e,a.goToPartners=r,a.goToContact=o}angular.module("app").controller("Menu",["$location","$state",t])}(),function(){angular.module("app.partners",["ngSanitize","ngRoute"])}(),function(){function t(t){t.state("partners",{url:"/partners",views:{"@":{templateUrl:"partners/views/partners.html",title:"partners"}}})}angular.module("app.partners").config(t),t.$inject=["$stateProvider"]}(),function(){angular.module("app.contact",["ngSanitize","ngRoute"])}(),function(){function t(t){t.state("contact",{url:"/contact",views:{"@":{templateUrl:"contact/views/contact.html",title:"contact"}}})}angular.module("app.contact").config(t),t.$inject=["$stateProvider"]}(),function(){angular.module("app.home",["ngSanitize","ngMaterial"])}(),function(){function t(t,n){function e(t){t.transitionTo("home")}e.$inject=["$state"],n.when("",e).otherwise("/404"),t.state("entryPoint",{url:"/redirect",controller:e}).state("home",{url:"/",views:{"@":{templateUrl:"home/views/home.html",controller:"Home",controllerAs:"ctrl",title:"home",resolve:{articles:["articleFactory",function(t){return t.fetchArticles(1).then(function(t){return t.articles})}],pagination:["articleFactory",function(t){return t.fetchArticles(1).then(function(t){return t.pagination})}]}}}}).state("404",{url:"/404",views:{"@":{templateUrl:"common/views/404.html"}}})}angular.module("app.home").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){function t(t){function n(){var n={method:"GET",url:host_url+"api/articles",headers:{"Content-Type":"application/json; charset=utf-8"}};return t(n)}var e={fetchArticlesContent:n,fetchPictures:fetchPictures};return e}angular.module("app.home").factory("homeFactory",["$http",t])}(),function(){function t(t,n,e,r,o,a){function c(t){n.path("article/"+t),e.scrollTo(0,0)}function i(t){n.path("partner/"+t),e.scrollTo(0,0)}function u(){var t=s.pagination.currentPage;r.fetchArticles(t+1).then(function(t){s.articles=t.articles,s.pagination=t.pagination,e.scrollTo(0,0)})}function l(){var t=s.pagination.currentPage;r.fetchArticles(t-1).then(function(t){s.articles=t.articles,s.pagination=t.pagination,e.scrollTo(0,0)})}t.debug("[app.home] Loading Home controller");var s=this;s.articles=o,s.pagination=a,s.goToArticle=c,s.goToPartner=i,s.nextPage=u,s.previousPage=l}angular.module("app.home").controller("Home",["$log","$location","$window","articleFactory","articles","pagination",t])}(),function(){function t(t){function n(){t.getInstagramPictures().then(function(t){e.medias=t})}var e=this;e.medias=[],n()}angular.module("app").controller("SidebarController",["sidebarService",t])}(),function(){function t(){return{bindToController:!0,controller:"SidebarController",controllerAs:"ctrl",link:function(t){},restrict:"E",scope:{},templateUrl:"sidebar/views/sidebar.html"}}angular.module("app").directive("sidebar",t)}(),function(){function t(t){function n(){var n="146070981.4dd8feb.97c8fd8acf924b3fb641f160ba7a3589",e=4771193178,r=8,o="https://api.instagram.com/v1/users/"+e+"/media/recent";return o+="?access_token="+n+"&scope=public_content&count="+r+"&callback=JSON_CALLBACK",t.jsonp(o).then(function(t){return t.data.data})}return{getInstagramPictures:n}}angular.module("app").service("sidebarService",["$http",t])}(),function(){angular.module("app.articles",["ngSanitize","ngMaterial","ngRoute"])}(),function(){function t(t){t.state("articles",{url:"/article/:articleId",views:{"@":{templateUrl:"articles/views/article.html",controller:"Article",controllerAs:"viewModel",title:"article",resolve:{article:["$stateParams","articleFactory",function(t,n){return n.fetchArticleContent(t.articleId)}],comments:["$stateParams","commentsService",function(t,n){return n.getCommentsByArticle(t.articleId).then(function(t){return t.comments})}],nbComments:["$stateParams","commentsService",function(t,n){return n.getCommentsByArticle(t.articleId).then(function(t){return t.totalComments})}]}}}})}angular.module("app.articles").config(t),t.$inject=["$stateProvider"]}(),function(){function t(t){function n(n){return t.get(host_url+"api/articles/"+n).then(function(t){return t.data})}function e(n){var e={method:"GET",url:host_url+"api/articles/article/"+n,headers:{"Content-Type":"application/json; charset=utf-8"}};return t(e).then(function(t){return t.data.article[0]})}function r(n){return t.post(host_url+"api/articles/article/"+n+"/view")}var o={fetchArticles:n,fetchArticleContent:e,insertView:r};return o}angular.module("app.articles").factory("articleFactory",["$http",t])}(),function(){function t(t,n,e,r,o){function a(){e.insertView(c.recipe.id).then(function(){angular.forEach(c.comments,function(n){n.text=t.trustAsHtml(n.text)})})}var c=this;c.recipe=n,c.comments=r,c.nbComments=o,a()}angular.module("app.articles").controller("Article",["$sce","article","articleFactory","comments","nbComments",t])}(),function(){angular.module("app.partner",["ngSanitize","ngMaterial","ngRoute"])}(),function(){function t(t){t.state("partner",{url:"/partner/:partnerId",views:{"@":{templateUrl:"partner/views/partner.html",controller:"Partner",controllerAs:"viewModel",title:"partner",resolve:{partner:["$stateParams","partnerFactory",function(t,n){return n.fetchPartnerContent(t.partnerId)}],comments:["$stateParams","commentsService",function(t,n){return n.getCommentsByPartner(t.partnerId).then(function(t){return t.comments})}],nbComments:["$stateParams","commentsService",function(t,n){return n.getCommentsByPartner(t.partnerId).then(function(t){return t.totalComments})}]}}}})}angular.module("app.partner").config(t),t.$inject=["$stateProvider"]}(),function(){function t(t){function n(n){var e={method:"GET",url:host_url+"api/partners/partner/"+n,headers:{"Content-Type":"application/json; charset=utf-8"}};return t(e).then(function(t){return t.data.partner[0]})}function e(n){return t.post(host_url+"api/partners/partner/"+n+"/view")}var r={fetchPartnerContent:n,insertView:e};return r}angular.module("app.partner").factory("partnerFactory",["$http",t])}(),function(){function t(t,n,e,r,o){function a(){e.insertView(c.partner.id).then(function(){angular.forEach(c.comments,function(n){n.text=t.trustAsHtml(n.text)})})}var c=this;c.partner=n,c.comments=r,c.nbComments=o,a()}angular.module("app.partner").controller("Partner",["$sce","partner","partnerFactory","comments","nbComments",t])}(),function(){function t(){return function(t){return moment(t+"","x").format("D MMMM YYYY")}}angular.module("app").filter("moment",[t])}(),function(){function t(t,n,e){function r(){var r=t(o.comment.text);o.comment.text=r.replace(/\n/g,"<br />"),o.isRecipe?n.sendComment(o.comment,o.articleId).then(function(){o.comment={pseudo:"",mail:"",url:"",text:""},n.getCommentsByArticle(o.articleId).then(function(t){o.comments=t.comments,o.nbComments=t.totalComments}),e.success("Commentaire envoyé !")}):n.sendPartnerComment(o.comment,o.articleId).then(function(){o.comment={pseudo:"",mail:"",url:"",text:""},n.getCommentsByPartner(o.articleId).then(function(t){o.comments=t.comments,o.nbComments=t.totalComments}),e.success("Commentaire envoyé !")})}var o=this;o.comment={pseudo:"",mail:"",url:"",text:""},o.sendComment=r}angular.module("app").controller("CommentsController",["$sanitize","commentsService","toastr",t])}(),function(){function t(){return{bindToController:!0,controller:"CommentsController",controllerAs:"ctrl",link:function(t){},restrict:"E",scope:{comments:"=",nbComments:"=",articleId:"=",isRecipe:"="},templateUrl:"articles/comments/views/comments.html"}}angular.module("app").directive("comments",t)}(),function(){function t(t){function n(n){return t.get(host_url+"api/comments/"+n).then(function(t){return t.data})}function e(n){return t.get(host_url+"api/comments/partner/"+n).then(function(t){return t.data})}function r(n,e){return t({url:host_url+"api/comments/"+e,method:"POST",params:n,headers:{"Content-Type":"application/json; charset=utf-8"}})}function o(n,e){return t({url:host_url+"api/comments/partner/"+e,method:"POST",params:n,headers:{"Content-Type":"application/json; charset=utf-8"}})}return{getCommentsByArticle:n,getCommentsByPartner:e,sendComment:r,sendPartnerComment:o}}angular.module("app").service("commentsService",["$http",t])}();
//# sourceMappingURL=app-3d50f9fdf3.js.map
