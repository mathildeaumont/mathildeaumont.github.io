"use strict";!function(){function t(){angular.element(document).ready(function(){angular.bootstrap(document,["app"])})}var e=angular.module("app",["ui.router","app.home","app.articles","ngStorage","ngMaterial"]);return t(),e}(),function(){angular.module("app").run()}(),function(){angular.module("app").config(["$compileProvider",function(t){t.debugInfoEnabled(!1)}])}();var host_url="http://127.0.0.1:8080/";!function(){function t(t){function e(){t.path("")}var n=this;n.goToHome=e}angular.module("app").controller("Menu",["$location",t])}(),function(){angular.module("app.home",["ngSanitize","ngMaterial"])}(),function(){function t(t,e){function n(t){t.transitionTo("home")}n.$inject=["$state"],e.when("",n).otherwise("/404"),t.state("entryPoint",{url:"/redirect",controller:n}).state("home",{url:"/",views:{"@":{templateUrl:"home/views/home.html",controller:"Home",controllerAs:"ctrl",title:"home",resolve:{articles:["articleFactory",function(t){return t.fetchArticles(1).then(function(t){return t.articles})}],pagination:["articleFactory",function(t){return t.fetchArticles(1).then(function(t){return t.pagination})}]}}}}).state("404",{url:"/404",views:{"@":{templateUrl:"common/views/404.html"}}})}angular.module("app.home").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){function t(t){function e(){var e={method:"GET",url:host_url+"api/articles",headers:{"Content-Type":"application/json; charset=utf-8"}};return t(e)}var n={fetchArticlesContent:e};return n}angular.module("app.home").factory("homeFactory",["$http",t])}(),function(){function t(t,e,n,r,o,i){function a(t){e.path("article/"+t),n.scrollTo(0,0)}function c(){var t=u.pagination.currentPage;r.fetchArticles(t+1).then(function(t){u.articles=t.articles,u.pagination=t.pagination,n.scrollTo(0,0)})}function l(){var t=u.pagination.currentPage;r.fetchArticles(t-1).then(function(t){u.articles=t.articles,u.pagination=t.pagination,n.scrollTo(0,0)})}t.debug("[app.home] Loading Home controller");var u=this;u.articles=o,u.pagination=i,u.goToArticle=a,u.nextPage=c,u.previousPage=l}angular.module("app.home").controller("Home",["$log","$location","$window","articleFactory","articles","pagination",t])}(),function(){angular.module("app.articles",["ngSanitize","ngMaterial","ngRoute"])}(),function(){function t(t){t.state("articles",{url:"/article/:articleId",views:{"@":{templateUrl:"articles/views/article.html",controller:"Article",controllerAs:"viewModel",title:"article",resolve:{article:["$stateParams","articleFactory",function(t,e){return e.fetchArticleContent(t.articleId)}],comments:["$stateParams","commentsService",function(t,e){return e.getCommentsByArticle(t.articleId).then(function(t){return t.comments})}],nbComments:["$stateParams","commentsService",function(t,e){return e.getCommentsByArticle(t.articleId).then(function(t){return t.totalComments})}]}}}})}angular.module("app.articles").config(t),t.$inject=["$stateProvider"]}(),function(){function t(){return function(t){return moment(t+"","x").format("D MMMM YYYY")}}angular.module("app.articles").filter("moment",[t])}(),function(){function t(t){function e(e){return t.get(host_url+"api/articles/"+e).then(function(t){return t.data})}function n(e){var n={method:"GET",url:host_url+"api/articles/article/"+e,headers:{"Content-Type":"application/json; charset=utf-8"}};return t(n).then(function(t){return t.data.article[0]})}function r(e){return t.post(host_url+"api/articles/article/"+e+"/view")}var o={fetchArticles:e,fetchArticleContent:n,insertView:r};return o}angular.module("app.articles").factory("articleFactory",["$http",t])}(),function(){function t(t,e,n,r,o){function i(){n.insertView(a.recipe.id).then(function(){angular.forEach(a.comments,function(e){e.text=t.trustAsHtml(e.text)})})}var a=this;a.recipe=e,a.comments=r,a.nbComments=o,i()}angular.module("app.articles").controller("Article",["$sce","article","articleFactory","comments","nbComments",t])}(),function(){function t(t){function e(){n.comment.text=n.comment.text.replace(/\n/g,"<br />"),t.sendComment(n.comment,n.articleId).then(function(){n.comment={pseudo:"",mail:"",url:"",text:""},t.getCommentsByArticle(n.articleId).then(function(t){n.comments=t.comments,n.nbComments=t.totalComments})})}var n=this;n.comment={pseudo:"",mail:"",url:"",text:""},n.sendComment=e}angular.module("app").controller("CommentsController",["commentsService",t])}(),function(){function t(){return{bindToController:!0,controller:"CommentsController",controllerAs:"ctrl",link:function(t){},restrict:"E",scope:{comments:"=",nbComments:"=",articleId:"="},templateUrl:"articles/comments/views/comments.html"}}angular.module("app.articles").directive("comments",t)}(),function(){function t(t){function e(e){return t.get(host_url+"api/comments/"+e).then(function(t){return t.data})}function n(e,n){return t({url:host_url+"api/comments/"+n,method:"POST",params:e,headers:{"Content-Type":"application/json; charset=utf-8"}})}return{getCommentsByArticle:e,sendComment:n}}angular.module("app.articles").service("commentsService",t),t.$inject=["$http"]}();
//# sourceMappingURL=app-29a3822559.js.map
